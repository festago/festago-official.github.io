{"componentChunkName":"component---src-templates-post-jsx","path":"/concurrency-redis/","result":{"data":{"site":{"siteMetadata":{"title":"Festago"}},"markdownRemark":{"id":"b2e904f3-69c7-5c99-96e7-9555aaddc0e2","excerpt":"안녕하세요. 페스타고의 애쉬 입니다. 🏹 ‘대학 축제 줄서기 서비스’ 페스타고를 개발하며, 티켓팅 상황에서 동시성 보장을 위해 Redis를 도입해보았습니다. 아래는 저희 팀의 요구사항과 문제 상황, 그리고 해당 문제 상황의 해결책으로 Redis를 도입한 이유입니다. 1. 요구사항 티켓은 지정된 수량만큼만 발급되어야합니다. 2. 문제 상황 동시에 여러 사용…","html":"<p>안녕하세요. 페스타고의 애쉬 입니다. 🏹</p>\n<p>‘대학 축제 줄서기 서비스’ 페스타고를 개발하며, 티켓팅 상황에서 동시성 보장을 위해 Redis를 도입해보았습니다.</p>\n<p>아래는 저희 팀의 요구사항과 문제 상황, 그리고 해당 문제 상황의 해결책으로 Redis를 도입한 이유입니다.</p>\n<h2>1. 요구사항</h2>\n<p>티켓은 지정된 수량만큼만 발급되어야합니다.</p>\n<h2>2. 문제 상황</h2>\n<p>동시에 여러 사용자가 예매할 때, 지정된 수량보다 더 많은 수량의 티켓이 예매됩니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/d684b93fc5d21695c9ac0da8753c0cf7/bbbf7/%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 85.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaUlEQVR42m1TS2/TQBDuBYl/wAUO/AtuPcGtV/5CJS4IgUAVByQOIHHgUnEAJMoRIaCiKm2J05ZCyatp3jSkTe36lTgvp37sehPbu4ztNGpDPtmr2W/m087uzMywEL7vNxqNTgjHIcDwJqubgctGCFzdbhdWz/PYOcyMrWKpFIvF0pnMqWkpmMVVGldoAzPYplJJjuPS6fRwOJwippTCqmgtMhj4lDpDVydMw8wNaEYI0TRtHHZB7IdMpU9vrQ/elszyXiKXz99N+fNJ5oUuhJAoitPFUURcJNeX2T2uWd1PCkrz5oY7u8EcLxJjWZaniwFOAFwQWhYmESPZrGaM0gKfIKnTxUD1dR0MVVUgwyCC0sf7/p0Mq9TqxUxipSDOcf5KeLZHJ9L2PL3XC8SKjDEGY+jT2zts9jutSZp69Of5au7aMntRIJNiPygydTCqHvGvd2r5Y/VE4JlLNo6tV5lWFIQdkuVbyCG2bV1Iu4lYvlr/W9hb+lm9/HBr/v0uXy1/W1u78Wz96pPto44d9ImNICkwDMOAUo9bZQYexPU86rk97C58LWXFIH+X4NWD9mJCpWEZ4S6KPBKD7brutCaRJSe8M6CsodixgSzzRBBa+unS7uGh2jH7vVH8/2JRVtCZeO5N9soC9/Ldh4Ps70WufOl+/NHngt43BL7eUOUpJ0uShM/En8rtp5uCjWBL+bbx4Eux2HJyGtkqiz+qjUOD9QcTaSsK9EPEWC7rjEwGd1GEOtTlV5NmemxbYx/5YOwuiGF04EkipqLTfHdUU9O0uPjmWVj4T4wkoN1uj19y4AffGBONGeEfw1ytr4dERv0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='    ' title='' src='/static/d684b93fc5d21695c9ac0da8753c0cf7/ca1dc/%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9.png' srcset='/static/d684b93fc5d21695c9ac0da8753c0cf7/e7570/%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9.png 170w,\n/static/d684b93fc5d21695c9ac0da8753c0cf7/f46e7/%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9.png 340w,\n/static/d684b93fc5d21695c9ac0da8753c0cf7/ca1dc/%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9.png 680w,\n/static/d684b93fc5d21695c9ac0da8753c0cf7/02d09/%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9.png 1020w,\n/static/d684b93fc5d21695c9ac0da8753c0cf7/bbbf7/%EB%AC%B8%EC%A0%9C%EC%83%81%ED%99%A9.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2>3. 지금까지의 해결책</h2>\n<p>티켓 수량의 정합성을 보장하기 위하여, <strong>비관적 락</strong>을 적용했습니다.</p>\n<p>하지만 비관적 락은 락을 얻기 위한 대기시간이 발생하기 때문에 성능적으로 좋지 않습니다.</p>\n<h3>3-1. 성능 개선책</h3>\n<h4>✅ TicketAmount 테이블 분리</h4>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/78e98164ed9d5e19c83cd23c30ad79cb/bbbf7/ticket%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B5%AC%EC%A1%B0.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 68.82352941176471%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVR42p2TWavCQAyF5///rSJYaFFcccEnd6t1b13aI19gxIfbh9vA0Gkmc3JyknGqYY/HQ6fTSev1WpvNRvv9XufzWe/3W+6/YEVR6HK56H6/q9vtqtFoqN1u63a76Xq9yr1eL0Mn6Pl8WiCHZVn+CQiLNE3FPWJ+F6wdQIfDwbKEYahWq2WgWZZVAlLiZDLRfD7X8Xg0P4BgOdhQBrpwiJNL+KsAiRmPx0ag3+8bIcxKhj4bn8WLzqVfnzf+SZbn+Vci9mDgd4vFQnEcazQafUEIQFeflcUZJe52OwMlBrDlcml6EkOlbrvdmm6dTse+jAGXEdiXSCALANh7iQBNkuSrOYncarUyLWAZBIF6vZ6JXlUyBvvZbKbpdKrBYGANQlPuOaiSiUUWslOCb0qVhsQCTCVo6YfdugwAThZ7Dqq6jNFIGA2HQ2PHdEDMAGFENj/p7Ktm0BsAzG0URWo2myYXzYKxq/OW0dePCXvKpXm1AQHwzxW2APOlDx++dzpK6EtbuQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='ticket     ' title='' src='/static/78e98164ed9d5e19c83cd23c30ad79cb/ca1dc/ticket%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B5%AC%EC%A1%B0.png' srcset='/static/78e98164ed9d5e19c83cd23c30ad79cb/e7570/ticket%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B5%AC%EC%A1%B0.png 170w,\n/static/78e98164ed9d5e19c83cd23c30ad79cb/f46e7/ticket%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B5%AC%EC%A1%B0.png 340w,\n/static/78e98164ed9d5e19c83cd23c30ad79cb/ca1dc/ticket%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B5%AC%EC%A1%B0.png 680w,\n/static/78e98164ed9d5e19c83cd23c30ad79cb/02d09/ticket%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B5%AC%EC%A1%B0.png 1020w,\n/static/78e98164ed9d5e19c83cd23c30ad79cb/bbbf7/ticket%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B5%AC%EC%A1%B0.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>Ticket 테이블에서 수량 정보를 TicketAmount 테이블로 분리한 후, 해당 테이블에만 비관적 락을 적용함으로써 <strong>락 범위를 최소화</strong>했습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/da1c613727496495ca18fac06fa65d80/bbbf7/lock%EB%B2%94%EC%9C%84.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACT0lEQVR42kWR32vTUBTH85/Imqbtktyb3zfprzRpx+oy9qBsuO5hWnEDmb6Ij/4L4vbStZn1QVAQXxSEwagwt7XbhIEoPohdnwSZKNvSJF1xbb3pUA8fDpdz+B7OPV/i46cPO/XNxm693mhs1Grvtra2trd39/a/NpvNw0PMYav1j2ar5Xc6g79BzExm03xUl8WUwJsSyEhcghc0wKgsg2gaMTRPkXyYFMJB5kMje40GlvV6vUB8zbISaiKlm+m0bhpGRtcTcU0UOB5CyDKAoVk6ANBBIDpW23iDZf1+PxBPX84jUYynTDWeVuIJNaVryaSoIAkhyHMsxwdADgrCKOQQw7x8vtztOoPhAGJ+5mpela2MYRmmZWQmTcPK6DlVyQagnKZeMBbXspo6rkgHe/v/1/b8jtt2fbftt532yYl7euo5TsdzzzzvzHNxD7ec42Nc9x3H972e2x50/MH5OR5AvH71wq48KpdLlYptV8q2bVerT0ql1VVcKpXstTXM8spKuVzGpcfV6o+jo8GXz936Zu/7N8LK5wAHRKTykoyQICkiFGQasjGGidJsjKZD4TBJUWSYCpHhSyS587Y2cJ3fv372PZeYnpoaSyYncmN5w8B5wsyOpxO6IqdlKc4DFbAahBoEGgc1AFQO7K6vB3++uPYVMyNHIgovK5woQYhECWGjRmkOOxSl2GiUjUQYKgJisRhFyaGRZ08fng2vjd0iHty/d7swe6dYxCwVb9y9WVy6Pr84N3urMLswV1icKywMuXgsFgoH77eHysCsPx5iQ1uHLBgKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='lock  ' title='' src='/static/da1c613727496495ca18fac06fa65d80/ca1dc/lock%EB%B2%94%EC%9C%84.png' srcset='/static/da1c613727496495ca18fac06fa65d80/e7570/lock%EB%B2%94%EC%9C%84.png 170w,\n/static/da1c613727496495ca18fac06fa65d80/f46e7/lock%EB%B2%94%EC%9C%84.png 340w,\n/static/da1c613727496495ca18fac06fa65d80/ca1dc/lock%EB%B2%94%EC%9C%84.png 680w,\n/static/da1c613727496495ca18fac06fa65d80/02d09/lock%EB%B2%94%EC%9C%84.png 1020w,\n/static/da1c613727496495ca18fac06fa65d80/bbbf7/lock%EB%B2%94%EC%9C%84.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h4>✅ N+1 쿼리 제거</h4>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/aa2c9cdd05f32ba9e376cb6fab0d3eaa/dc992/n%2B1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 29.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/0lEQVR42pWQXW6DMBAGOU2jBox/sXEIAQIkoal6/9tMN02lPrZ9GK3X1jdab5HSjpx3WFdSKoWq9pSVnKvqm/JfFGFyzBfDdjX0S8OyGIbbwHCfCVPEHC22d7iT/xOFnRqGi+d9E+lNi6zlvF0Yt5l2yeTlQFozYY74c/iVwo5BJrTcr5pRgt16kOlWlo83TjeRnjvyesRPCTdIaPzBjf7J8KyPu+LxrdgH2lZjQ8A4S4iGmNxXdV7Jfit5K9FOUdua2tUoQTstGIy3kjMorSh8aEi5o2mCSBLeOfqomDvDfDCMrew2VXT5BR9eRVCLQKRWSR8JIZHajih5Ve75BHQDwzS8EKi6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='n 1' title='' src='/static/aa2c9cdd05f32ba9e376cb6fab0d3eaa/ca1dc/n%2B1.png' srcset='/static/aa2c9cdd05f32ba9e376cb6fab0d3eaa/e7570/n%2B1.png 170w,\n/static/aa2c9cdd05f32ba9e376cb6fab0d3eaa/f46e7/n%2B1.png 340w,\n/static/aa2c9cdd05f32ba9e376cb6fab0d3eaa/ca1dc/n%2B1.png 680w,\n/static/aa2c9cdd05f32ba9e376cb6fab0d3eaa/02d09/n%2B1.png 1020w,\n/static/aa2c9cdd05f32ba9e376cb6fab0d3eaa/dc992/n%2B1.png 1178w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\nFetch Join을 활용해 N+1 쿼리를 제거했습니다.</p>\n<p>⇒ 결과적으로 <strong>10% 정도의 성능 개선</strong>을 이루어낼 수 있었습니다.</p>\n<h2>4. 앞으로의 성능 개선책</h2>\n<p>서버 단에서 성능 향상을 위해 일반적으로 캐싱과 DB 인덱스를 활용하곤 합니다.</p>\n<p>하지만 티켓 예매 로직에서 가장 큰 병목은 데이터의 조회가 아닌 <strong>Lock을 얻기 위한 대기로 인해 발생</strong>합니다.</p>\n<p>따라서, <strong>가능한 Lock을 걸지 않는 것</strong>이 성능을 향상 시키는 방법입니다.</p>\n<p>저희는 <strong>DB의 티켓 수량을 변경</strong>할 때, 정합성을 보장하기 위해서 Lock을 겁니다.</p>\n<p>따라서, <strong>DB의 티켓 수량을 변경하지 않는 해결책</strong>을 찾고자 했습니다.</p>\n<h3>4-1. AtomicInteger의 활용</h3>\n<p>첫번째 해결책으로 AtomicInteger를 활용해 <strong>메모리에서 티켓의 수량을 변경하고 관리</strong>하고자 했습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/47a0c66aa6ebe21a927c4353a6285665/1d574/atomicInteger.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 42.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9UlEQVR42jWRy28SURjF509wJdZEEjvAPC4tc5kHj2HowFCif4AubO3KUCkG3JgZusDYunDZvYlaGFi61rWPnVFiY7GmCyvGRYUqILYduNc70/jll3O+zUnu+S7Vaj5utex6vW7Xt+uNRsO2m3az2Wy5tv3UfkZ4csbPXh9jfDr+44xHZJkgTHEcE4lKEQhlKSJAgQOADgVpOjAbZC9ykZnQ3ExonuALgDftzneEX3f7bw8OPxyddseIiifUTC6f1g3dWNSzWTWlxhJJRYZg4eqllU3/Us2/8sC/XPNdrz5/f/Cyhx7tDbf2R1ud/pehQ4UZVpaTohgTJVmKJSCEPA94nmc5niPKEucZlmOC9LudXfJajByEp8RGDqLMe3fXq5ZlWt6YlnmG5er/IVvVMve7P7wwQq7hkYMpXY8b+XzWyF7J60Yut5DJqloqqWqqqsZjkiJFFUmUJVERYXt3j2Sc6XTi5YckLCqJlG6k0rqmZ7S0piiyIEpwHrDq4vmbD303ar7ljQtL989dWyedX/RRdedo49OvzY+HnwduZ4Z0hlCBkiwqcUEQeBBmeTbAhQNzURoIRGeBcJkFr9qd3xgPjp3ByWR44vSOEVUs3CpXKuUygUzlTqlULBbXPEq3Vz0KRNdWC1+/dd1/niBnisnR/k7wPw7ECod7zhyiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='atomicInteger' title='' src='/static/47a0c66aa6ebe21a927c4353a6285665/ca1dc/atomicInteger.png' srcset='/static/47a0c66aa6ebe21a927c4353a6285665/e7570/atomicInteger.png 170w,\n/static/47a0c66aa6ebe21a927c4353a6285665/f46e7/atomicInteger.png 340w,\n/static/47a0c66aa6ebe21a927c4353a6285665/ca1dc/atomicInteger.png 680w,\n/static/47a0c66aa6ebe21a927c4353a6285665/02d09/atomicInteger.png 1020w,\n/static/47a0c66aa6ebe21a927c4353a6285665/9d567/atomicInteger.png 1360w,\n/static/47a0c66aa6ebe21a927c4353a6285665/1d574/atomicInteger.png 1510w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>이 방법은 DB의 데이터를 갱신하지 않기 때문에, 동시 예매 상황에서 발생하는 문제가 발생하지 않습니다.</p>\n<p>지금의 단일 서버에서는 문제가 발생하지 않지만, 무중단 배포를 위한 다중 서버 환경에서는 메모리 공유 문제가 발생합니다.</p>\n<p>티켓의 수량은 단순히 조회하는 값이 아닌 매 요청마다 변경되는 값이기 때문에 동기화에서 문제 발생이 우려됩니다.</p>\n<h3>4-2. Redis 활용</h3>\n<p>AtomicInteger의 대체제로 Redis를 활용했습니다.</p>\n<p>Redis는 싱글 스레드이며 multiplexing 기술을 활용하여 단일 프로세스가 모든 클라이언트 요청을 처리합니다. 따라서 모든 요청이 순차적으로 처리됩니다.</p>\n<p>네트워크 I/O가 존재하지만, 그럼에도 DB에 락을 거는 것 보다 성능이 훨씬 뛰어납니다.</p>\n<p>3000개의 요청을 처리하는데 DB 락을 활용한 방법은 평균 12800ms가 소요되는 반면, Redis를 활용한 방법은 평균 7500ms이 소요됩니다. 이는 <strong>40% 이상의 성능 개선</strong>입니다.</p>\n<table>\n<thead>\n<tr>\n<th>DB 락</th>\n<th>Redis</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>12764</td>\n<td>8249</td>\n</tr>\n<tr>\n<td>14217</td>\n<td>7350</td>\n</tr>\n<tr>\n<td>12177</td>\n<td>7123</td>\n</tr>\n<tr>\n<td>11969</td>\n<td>7414</td>\n</tr>\n</tbody>\n</table>\n<h2>5. Redis 활용법</h2>\n<p>구체적인 Redis 활용법을 알아보도록 하겠습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/40c2ae3dc25d969899a74aea4e565223/52c6a/%ED%8B%B0%EC%BC%93%EB%93%B1%EB%A1%9D.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 43.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVElEQVR42oVRSU7DQBD0czjyIE78hEsOPIknIK6YRHIUKYmyOYnteN+mqGoyChyAkcqe6emu7qoJ0jTFdrs17HY7/Luc+/M6OBwORuRJ67o2VFV1Q1miaVu0XYduGFBz76F40zRW49gsGMfRNh4DCwTFhaHvrXP2HuLj4RHR5BlDnqM/J+gvF/RU6JhTsrHygy8Vv8twTNI6v77h5e4e4dMESBKMJBr2e4zHI8DJNaERatwsyyAvhZzdBcV7dta0vWQyp2Nc9N9VdMxzREFbFAtUHEURZrMZVqsV5vM5ptMp4jg2/0SckmyzWOBEr9ebDZbMi08nVLxbL5cYiuJGqE/JQxiGRrRgoYg6yvixmOeYN8qr/IKRJNBDMIYrhxGqUB5q0oJJ8sJkUq7uWr0uoX2nf92YTAPPZguli9A81DQiaa/Pr7OIPbynBp0JFQu+1vut9Qne6bV/DQNGOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='    ' title='' src='/static/40c2ae3dc25d969899a74aea4e565223/ca1dc/%ED%8B%B0%EC%BC%93%EB%93%B1%EB%A1%9D.png' srcset='/static/40c2ae3dc25d969899a74aea4e565223/e7570/%ED%8B%B0%EC%BC%93%EB%93%B1%EB%A1%9D.png 170w,\n/static/40c2ae3dc25d969899a74aea4e565223/f46e7/%ED%8B%B0%EC%BC%93%EB%93%B1%EB%A1%9D.png 340w,\n/static/40c2ae3dc25d969899a74aea4e565223/ca1dc/%ED%8B%B0%EC%BC%93%EB%93%B1%EB%A1%9D.png 680w,\n/static/40c2ae3dc25d969899a74aea4e565223/02d09/%ED%8B%B0%EC%BC%93%EB%93%B1%EB%A1%9D.png 1020w,\n/static/40c2ae3dc25d969899a74aea4e565223/9d567/%ED%8B%B0%EC%BC%93%EB%93%B1%EB%A1%9D.png 1360w,\n/static/40c2ae3dc25d969899a74aea4e565223/52c6a/%ED%8B%B0%EC%BC%93%EB%93%B1%EB%A1%9D.png 1452w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h3>(1) 티켓 등록시 Redis에 값 넣어주기</h3>\n<p>티켓을 등록하면, (<code class=\"language-text\">ticketAmount_ticketId</code>, <code class=\"language-text\">ticketAmount</code>) 데이터를 Redis에 등록합니다.\n(추가 수량 발급시, ticketAmount를 추가 수량만큼 더해줍니다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">updateTicketAmount</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TicketAmountChangeEvent</span> ticketAmountChangeEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Long</span> ticketId <span class=\"token operator\">=</span> ticketAmountChangeEvent<span class=\"token punctuation\">.</span><span class=\"token function\">ticketId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Integer</span> ticketAmount <span class=\"token operator\">=</span> ticketAmountChangeEvent<span class=\"token punctuation\">.</span><span class=\"token function\">ticketAmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ticketAmount_\"</span> <span class=\"token operator\">+</span> ticketId<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> ticketAmount<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>(2) 티켓팅시 Redis에서 수량 관리하기</h3>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/5ab4ac3136879a16bd1f7ec27247a343/e8464/%ED%8B%B0%EC%BC%93%ED%8C%85.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 62.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB80lEQVR42pVTy2rcQBDUPbdAbvm/nPI7vvgvAiHkZBMwxpBTjsm+d6XVY7U7Wkmjt8pVo2xIgg32QDOjme7qrq6Wh2fWOI7/2jC4+3q7Q3h1DXP/ICcM1mJsGoxd5949vHBdAINPn/Hl7XusCAqCDKcT+jDEkOcugWeZ4Xw+O8uyzFlRFNjtdoiiCPv9Huv1Gr7vI6NPy7dwNkNIkCgIoHhDUMMzmNRLkgTz+RyLxQIBL3XebDbQfZqmONFZ++FwwHK1QnE8oiGIrWuUmYFlXM1ENf1UsdeQv6qZMavAVJGyClD7kQDGGHcuaW1ZwhA85ntCBkqgyi139P3Uw47ILoDOSqA1/O5ZVVV/7tw9z5b9KkldYBXPqrBVherhRcX/1X1KdbeL6rc7VD9/TQ9t6yobaa9TuZ8qPj58x9c37/Djw0egyNGz7x1F60VZgKIrqqKcs3ztPbNJCPVPosRx7ERRDzV3m5tbpOy7ZVzF75ptGdgC10MFbLdbJ4hTcrl03xqLiwkwpgA+BYtYTX7OkJiTGxsj5RnXE9gBau4Ecpm1FR00PgJSlX/PpuFuqXhDJhXF0fhUVLsVK1bpAEVRo6JgjYqGWWe1QtRriiAfqT5IMIqQMnFAyj6ZGLal5nujHmqw8doltbtJWegftiXNTmpzPQLoeeM2Z/SKIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='   ' title='' src='/static/5ab4ac3136879a16bd1f7ec27247a343/ca1dc/%ED%8B%B0%EC%BC%93%ED%8C%85.png' srcset='/static/5ab4ac3136879a16bd1f7ec27247a343/e7570/%ED%8B%B0%EC%BC%93%ED%8C%85.png 170w,\n/static/5ab4ac3136879a16bd1f7ec27247a343/f46e7/%ED%8B%B0%EC%BC%93%ED%8C%85.png 340w,\n/static/5ab4ac3136879a16bd1f7ec27247a343/ca1dc/%ED%8B%B0%EC%BC%93%ED%8C%85.png 680w,\n/static/5ab4ac3136879a16bd1f7ec27247a343/02d09/%ED%8B%B0%EC%BC%93%ED%8C%85.png 1020w,\n/static/5ab4ac3136879a16bd1f7ec27247a343/9d567/%ED%8B%B0%EC%BC%93%ED%8C%85.png 1360w,\n/static/5ab4ac3136879a16bd1f7ec27247a343/e8464/%ED%8B%B0%EC%BC%93%ED%8C%85.png 1536w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>Redis의 DECR 연산으로티켓팅에서 해당 티켓의 잔여 수량을 조회함과 동시에, 잔여 수량을 1 감소합니다.</p>\n<p>이 때, 잔여 수량 \"조회\"와 \"1 감소\"는 원자적인 단위로 이루어져 동시성 문제가 발생하지 않습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getSequence</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Ticket</span> ticket<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Integer</span> totalAmount <span class=\"token operator\">=</span> ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getTicketAmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTotalAmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Long</span> quantity <span class=\"token operator\">=</span> <span class=\"token function\">getQuantity</span><span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>quantity <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> quantity <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Optional</span><span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">Optional</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>totalAmount <span class=\"token operator\">-</span> quantity<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>잔여 수량이 0 이상이면, 티켓팅에 성공한 것으로 총 수량에서 잔여 수량을 빼 티켓 순번을 결정합니다.</p>\n<p>잔여 수량이 0보다 적으면 이는 품절된 것으로, 티켓팅에 실패합니다.</p>\n<h2>6. 추가적인 활용법</h2>\n<p>저희 서비스의 요구사항으로, 한 사용자는 특정 무대에 대해 한 장의 티켓만 발급할 수 있습니다.</p>\n<p>하지만 한 사용자가 동시에 여러 요청을 보내면, 티켓이 여러 장 발급되는 문제(일명 <strong>“따닥” 문제</strong>)가 발생했습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/71f9a9f0553cb19960e49fc7b02f9fc6/1d574/%EB%94%B0%EB%8B%A5.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 75.88235294117648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPklEQVR42m1TS2/TQBDO70VICAGCA2fuiANcOYPUC7SiTUiT2DhOyYOoSUmT+BUbJ3H8Xq/xY3cZ21HSVszB3tn1N/N9s59rjLEwDHu9nud57E5sY3aisXW8Tyktnpqm9ft9jHG1WavAPM/7vl98VO4SytSI9mymoP0OLdGKooiiGMf7krVq1zRN13X9MmCBEMqSeIUIZfeCEGIYxiHdg5fLJcdxzWYTKHQ6HaHbbdQbrWsJzkAOCsMgCKBiFEXA/ECkhjKKKVvKiue5kK/XazjO85wSctGffjs/r9frrVarUYYgCNDmCOY25MRk36/G3R8cxjEgJUmyHcex7V+rHSpnU7WFRZqmsqqFOcN5Cc5JUUTXDV3Xp9OpLMv6StOlBfZsyQrd7dq3NqPhYDgcQkVR4L+2xU8m61rkqBkaTiYTuIbr8bgp/vxw2X972n5z1uUt3FAsL8koyZMkAc2KqpLiOugRDDOEs/JOyO8geTr/++wmfMzJTwbbR7wioay6RZg2EDxqhhxewKrVbtugczSSb2fYUCNdXltOEnqRZfquA7Jh7KD5Hrh6wZBgzmmeAz8vTgbb4MaL31/03n3+8vEUxt3hOa7DcfP5XFXVh+CCdpYxYC7NZqvN82n4euK9aN++vDJeCZIWpaXtaJZl/+lcgNO0cDAKM4SAbY4RRgi7Tuy7uqaBIhC42+0Wi8VDMPA5OBbyjNCMsjMpkLWVbvyBCUMAHkwChql8egSD3Ssb3A0lYg+8DQ3g/zt0/gdSoDu8dAJAiAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='  ' title='' src='/static/71f9a9f0553cb19960e49fc7b02f9fc6/ca1dc/%EB%94%B0%EB%8B%A5.png' srcset='/static/71f9a9f0553cb19960e49fc7b02f9fc6/e7570/%EB%94%B0%EB%8B%A5.png 170w,\n/static/71f9a9f0553cb19960e49fc7b02f9fc6/f46e7/%EB%94%B0%EB%8B%A5.png 340w,\n/static/71f9a9f0553cb19960e49fc7b02f9fc6/ca1dc/%EB%94%B0%EB%8B%A5.png 680w,\n/static/71f9a9f0553cb19960e49fc7b02f9fc6/02d09/%EB%94%B0%EB%8B%A5.png 1020w,\n/static/71f9a9f0553cb19960e49fc7b02f9fc6/9d567/%EB%94%B0%EB%8B%A5.png 1360w,\n/static/71f9a9f0553cb19960e49fc7b02f9fc6/1d574/%EB%94%B0%EB%8B%A5.png 1510w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>이는 DB의 MemberTicket 테이블에 <strong>(memberId, stageId) Unique 제약조건</strong>을 걸어줌으로써 해결할 수 있습니다.</p>\n<p>하지만 Unique 제약 조건은 Change Buffer 기능을 비활성화 시킴으로 데이터 삽입 연산의 성능이 저하되는 문제가 발생합니다.</p>\n<p>또한, 한 사용자당 발급 가능 횟수가 1회에서 2회로 변경될 경우 해당 방법으로 해결할 수 없습니다.</p>\n<p>이러한 따닥 문제를 해결하기 위한 해결책으로도 Redis를 활용하였습니다.</p>\n<h3>6-1. 따닥 문제 해결하기</h3>\n<p>티켓 예매 시도시, 해당 memberId와 stageId의 복합키 <code class=\"language-text\">trialCount_stageId_memberId</code> 의 값을 incrementAndGet 합니다.</p>\n<p>해당 연산의 반환값이, 발급 가능 매수보다 크면 예외처리합니다.</p>\n<p>해당 연산은 티켓 발급 가능 여부를 확인하는 연산과 <strong>원자적인 단위</strong>로 묶여있기 때문에, 동시 예매의 문제가 발생하지 않습니다.</p>\n<p>아래는 해당 연산의 스크립트입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"lua\"><pre class=\"language-lua\"><code class=\"language-lua\"><span class=\"token keyword\">local</span> memberTryCount <span class=\"token operator\">=</span> redis<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"INCR\"</span><span class=\"token punctuation\">,</span> KEYS<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nredis<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"EXPIRE\"</span><span class=\"token punctuation\">,</span> KEYS<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">-- 따닥인 경우</span>\n<span class=\"token keyword\">if</span> memberTryCount <span class=\"token operator\">></span> <span class=\"token function\">tonumber</span><span class=\"token punctuation\">(</span>ARGV<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">then</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">2</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">local</span> remainAmount <span class=\"token operator\">=</span> redis<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DECR\"</span><span class=\"token punctuation\">,</span> KEYS<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">-- 품절인 경우</span>\n<span class=\"token keyword\">if</span> remainAmount <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">then</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">return</span> remainAmount</code></pre></div>\n<p>아래는 lua 스크립트를 활용한 서비스 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getSequence</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Ticket</span> ticket<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Long</span> remainAmount <span class=\"token operator\">=</span> redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>\n        redisScript<span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token function\">makeMemberKey</span><span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">makeTicketAmountKey</span><span class=\"token punctuation\">(</span>ticket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token constant\">MAX_MEMBER_TRIAL_COUNT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>remainAmount <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> remainAmount <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Optional</span><span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token class-name\">Integer</span> totalAmount <span class=\"token operator\">=</span> ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getTicketAmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTotalAmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">Optional</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>totalAmount <span class=\"token operator\">-</span> remainAmount<span class=\"token punctuation\">.</span><span class=\"token function\">intValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">makeMemberKey</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Ticket</span> ticket<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Long</span> stageId <span class=\"token operator\">=</span> ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getStage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Long</span> memberId <span class=\"token operator\">=</span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"trialCount_%d_%d\"</span><span class=\"token punctuation\">,</span> stageId<span class=\"token punctuation\">,</span> memberId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">makeTicketAmountKey</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Ticket</span> ticket<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ticketAmount_%d\"</span><span class=\"token punctuation\">,</span> ticket<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2><strong>적용 코드 링크</strong></h2>\n<p><a href=\"https://github.com/woowacourse-teams/2023-festa-go/pull/428\">https://github.com/woowacourse-teams/2023-festa-go/pull/428</a></p>","frontmatter":{"title":"선착순 티켓팅에 Redis 도입하기","date":"September 10, 2023","update":"September 10, 2023","tags":["Redis"],"series":null},"fields":{"slug":"/concurrency-redis/","readingTime":{"minutes":8.645}}},"seriesList":{"edges":[{"node":{"id":"9ecb7f42-84ec-536a-9bfc-a3affcb87512","fields":{"slug":"/oauth2-select-and-apply/"},"frontmatter":{"title":"페스타고의 인증 - OAuth2를 선택하고 적용한 방법"}}},{"node":{"id":"1c28c731-cebd-5aab-b9bd-a5c397bf9c7a","fields":{"slug":"/oauth2-multiple-user-auth/"},"frontmatter":{"title":"페스타고의 인증 - 여러 사용자의 인증과 인가"}}},{"node":{"id":"b2e904f3-69c7-5c99-96e7-9555aaddc0e2","fields":{"slug":"/concurrency-redis/"},"frontmatter":{"title":"선착순 티켓팅에 Redis 도입하기"}}}]},"previous":{"fields":{"slug":"/oauth2-multiple-user-auth/"},"frontmatter":{"title":"페스타고의 인증 - 여러 사용자의 인증과 인가"}},"next":null},"pageContext":{"id":"b2e904f3-69c7-5c99-96e7-9555aaddc0e2","series":null,"previousPostId":"1c28c731-cebd-5aab-b9bd-a5c397bf9c7a","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}